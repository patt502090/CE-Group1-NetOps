# /etc/samba/smb.conf
# Samba4 Active Directory Domain Controller — GROUP1.CORP
#
# Provisioned domain: GROUP1.CORP
# IP: 10.1.10.20
# Host: dc1.group1.corp

[global]
    # ===== Domain Settings =====
    workgroup = GROUP1
    realm = GROUP1.CORP
    netbios name = DC1
    server role = active directory domain controller

    # ===== DNS =====
    dns forwarder = 8.8.8.8
    # ใช้ internal DNS ของ Samba4

    # ===== Logging =====
    log file = /var/log/samba/log.%m
    log level = 1
    max log size = 5000

    # ===== Security =====
    # NTLMv1 disable — ใช้ NTLMv2 เท่านั้น (secure)
    ntlm auth = mschapv2-and-ntlmv2-only

    # Allow ntlm_auth helper สำหรับ FreeRADIUS
    # FreeRADIUS จะเรียก ntlm_auth ผ่าน winbind pipe
    winbind separator = \\

    # ===== TLS (LDAPS) =====
    # tls enabled = yes
    # tls keyfile = /etc/samba/tls/key.pem
    # tls certfile = /etc/samba/tls/cert.pem
    # tls cafile = /etc/samba/tls/ca.pem

    # ===== Performance =====
    # Bind interfaces only to specific IP (optional)
    # interfaces = 10.1.10.20 lo
    # bind interfaces only = yes

[sysvol]
    path = /var/lib/samba/sysvol
    read only = No

[netlogon]
    path = /var/lib/samba/sysvol/group1.corp/scripts
    read only = No
